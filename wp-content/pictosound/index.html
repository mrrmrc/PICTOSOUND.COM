<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PictoSound - Da Immagine a Musica</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://pictosound.com/wp-content/pictosound/css/style.css">
</head>

<body>
    <div class="pictosound-wrapper">
        <div class="container">
            <div class="logo-container">
                <div class="logo-brand">üéµ PictoSound</div>
            </div>
            <h1>TRASFORMA L'IMMAGINE IN MUSICA</h1>
            <p class="subtitle">Lascia che l'AI analizzi l'immagine e la trasformi in esperienza sonora. Da oggi anche
                le immagini hanno un suono.</p>

            <div class="options-section">
                <h3>1. Scegli la tua Immagine</h3>
                <div class="input-actions-container">
                    <input type="file" id="imageUpload" accept="image/*" title="Carica un file immagine">
                    <button id="takePictureButton" class="icon-button" title="Usa la fotocamera">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M4 4h3l2-2h6l2 2h3v16H4V4zm8 13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm0-8c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z" />
                        </svg>
                        Scatta Foto
                    </button>
                </div>

                <div id="cameraViewContainer">
                    <video id="cameraFeed" autoplay playsinline></video>
                    <div class="camera-controls">
                        <button id="captureImageButton">üì∏ Scatta!</button>
                        <button id="switchCameraButton">üîÑ Cambia</button>
                        <button id="closeCameraButton">‚ùå Chiudi</button>
                    </div>
                </div>

                <div id="imagePreviewContainer">
                    <img id="imagePreview" src="#" alt="Anteprima Immagine" style="display:none;">
                    <canvas id="detectionCanvas"></canvas>
                </div>
            </div>

            <div id="mainContentArea">
                <div class="options-section" id="durationSection">
                    <h3>2. Durata Musica</h3>
                    <div class="radio-duration-group">
                        <div class="radio-duration-item">
                            <input type="radio" id="duration40" name="musicDuration" value="40" checked>
                            <label for="duration40">
                                <span class="duration-value">40s</span>
                                <span class="duration-credit">GRATIS</span>
                            </label>
                        </div>
                        <div class="radio-duration-item">
                            <input type="radio" id="duration60" name="musicDuration" value="60">
                            <label for="duration60">
                                <span class="duration-value">60s</span>
                                <span class="duration-credit">DEMO</span>
                            </label>
                        </div>
                        <div class="radio-duration-item">
                            <input type="radio" id="duration120" name="musicDuration" value="120">
                            <label for="duration120">
                                <span class="duration-value">120s</span>
                                <span class="duration-credit">DEMO</span>
                            </label>
                        </div>
                        <div class="radio-duration-item">
                            <input type="radio" id="duration180" name="musicDuration" value="180">
                            <label for="duration180">
                                <span class="duration-value">180s</span>
                                <span class="duration-credit">DEMO</span>
                            </label>
                        </div>
                        <div class="radio-duration-item">
                            <input type="radio" id="duration240" name="musicDuration" value="240">
                            <label for="duration240">
                                <span class="duration-value">240s</span>
                                <span class="duration-credit">DEMO</span>
                            </label>
                        </div>
                        <div class="radio-duration-item">
                            <input type="radio" id="duration360" name="musicDuration" value="360">
                            <label for="duration360">
                                <span class="duration-value">360s</span>
                                <span class="duration-credit">DEMO</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="action-buttons-container">
                    <button id="generateMusicButton" disabled>
                        Avvia generazione musica
                        <span id="musicSpinner" style="display:none;" class="spinner"></span>
                    </button>
                </div>

                <div id="dynamicFeedbackArea">
                    <div id="status" class="status-message">Caricamento modelli AI...</div>
                    <div id="progressAndPlayerContainer">
                        <div id="progressMessage"></div>
                        <div class="progress-bar-container" id="progressBarContainer">
                            <div class="progress-bar-animated" id="progressBarAnimated"></div>
                        </div>
                        <div id="audioPlayerContainer">
                            <h3>üéµ Musica Generata</h3>
                            <audio id="audioPlayer" controls></audio>
                            <p id="audioInfo"></p>
                            <div id="downloadButtonsContainer">
                                <a id="downloadAudioLink" href="#" class="download-button">üì• Scarica Audio</a>
                                <a id="downloadCompositeImageLink" href="#" class="download-button">üñºÔ∏è Img+QR</a>
                                <a id="downloadQrOnlyLink" href="#" class="download-button">üì± Solo QR</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="aiInsightsSection" class="options-section">
                    <h3>üß† COSA VEDE L'AI</h3>
                    <p id="aiInterpretationText">L'intelligenza artificiale analizzer√† la tua immagine...</p>
                    <div class="details-accordion-header">
                        <span>Dettagli Analisi</span>
                        <span class="toggle-icon"></span>
                    </div>
                    <div id="aiInsightsContent">
                        <div class="ai-processing-simulation" id="aiProcessingSimulation">
                            <p>In attesa di analisi immagine...</p>
                        </div>
                    </div>
                </div>

                <div class="options-section" id="descriptiveCuesSection">
                    <h3>üéõÔ∏è PERSONALIZZAZIONI <span class="optional-text">(opzionale)</span></h3>
                    <p class="info-text-cues-main">L'AI generer√† la musica basandosi sull'immagine. Le tue scelte
                        guideranno l'interpretazione.</p>

                    <div class="bpm-slider-container">
                        <label for="bpmSlider" class="bpm-label">
                            üéµ Velocit√† (BPM): <span id="bpmValue">120</span>
                        </label>
                        <input type="range" id="bpmSlider" name="bpm" min="40" max="200" value="120" step="5">
                    </div>

                    <div class="cues-grid-container">
                        <div class="cues-column">
                            <div class="cues-selection-container">
                                <label class="group-label collapsible-cue-header">
                                    <div class="cue-header-content">
                                        <span class="cue-icon">üòä</span>
                                        <span class="cue-title">Mood</span>
                                    </div>
                                    <span class="toggle-icon-cues"></span>
                                </label>
                                <div class="checkbox-pills-group" id="moodPills"></div>
                            </div>
                        </div>

                        <div class="cues-column">
                            <div class="cues-selection-container">
                                <label class="group-label collapsible-cue-header">
                                    <div class="cue-header-content">
                                        <span class="cue-icon">üéµ</span>
                                        <span class="cue-title">Genere</span>
                                    </div>
                                    <span class="toggle-icon-cues"></span>
                                </label>
                                <div class="checkbox-pills-group" id="genrePills"></div>
                            </div>
                        </div>

                        <div class="cues-column">
                            <div class="cues-selection-container">
                                <label class="group-label collapsible-cue-header">
                                    <div class="cue-header-content">
                                        <span class="cue-icon">üé∏</span>
                                        <span class="cue-title">Strumenti</span>
                                    </div>
                                    <span class="toggle-icon-cues"></span>
                                </label>
                                <div class="checkbox-pills-group" id="instrumentPills"></div>
                            </div>
                        </div>

                        <div class="cues-column">
                            <div class="cues-selection-container">
                                <label class="group-label collapsible-cue-header">
                                    <div class="cue-header-content">
                                        <span class="cue-icon">ü•Å</span>
                                        <span class="cue-title">Ritmo</span>
                                    </div>
                                    <span class="toggle-icon-cues"></span>
                                </label>
                                <div class="checkbox-pills-group" id="rhythmPills"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Canvas nascosti -->
    <canvas id="imageCanvas" style="display:none;"></canvas>
    <canvas id="compositeImageCanvas" style="display:none;"></canvas>

    <!-- Script AI Libraries - CDN Affidabili -->
    <script src="https://pictosound.com/wp-content/pictosound/js/tf.min.js"></script>
    <script src="https://pictosound.com/wp-content/pictosound/js/coco-ssd.min.js"></script>
    <script src="https://pictosound.com/wp-content/pictosound/js/face-api.min.js"></script>
    <script src="https://pictosound.com/wp-content/pictosound/js/qrcode.min.js"></script>

    <!-- Script principale -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://pictosound.com/wp-content/pictosound/js/script.js"></script>
</body>

</html>